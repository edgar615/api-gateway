{
  "name": "device.p2p.add.1.1.0",
  "method": "POST",
  "path": "/devices/p2p",
  "authentication": true,
  "scope": "device:write",
  "appkey": true,
  "app_code_vertify": true,
  "body.arg": [
    {
      "name": "p2pSerialNum",
      "rules": {
        "required": true,
        "maxLength": 32
      }
    },
    {
      "name": "p2pUsername",
      "rules": {
        "required": true,
        "maxLength": 60
      }
    },
    {
      "name": "p2pPassword",
      "rules": {
        "required": true,
        "maxLength": 60
      }
    },
    {
      "name": "macAddress",
      "rules": {
        "required": true,
        "regex": "[0-9a-fA-F]{12}"
      }
    },
    {
      "name": "innerIp",
      "rules": {
        "required": true,
        "maxLength": 15
      }
    },
    {
      "name": "dns",
      "rules": {
        "required": true,
        "maxLength": 15
      }
    },
    {
      "name": "port",
      "rules": {
        "required": true,
        "integer": true
      }
    },
    {
      "name": "mediaPort",
      "rules": {
        "required": true,
        "integer": true
      }
    },
    {
      "name": "type",
      "rules": {
        "integer": true,
        "optional": [
          1101,
          1102,
          1103
        ]
      }
    }
  ],
  "endpoints": [
    {
      "service": "device",
      "method": "POST",
      "name": "add_device",
      "type": "http",
      "path": "/devices/p2p"
    }
  ],
  "request.transformer": [
    {
      "name": "add_device",
      "body.add": [
        "userId:$user.userId",
        "username:$user.username",
        "companyCode:$user.companyCode"
      ],
      "header.add": [
        "x-auth-userId:$user.userId",
        "x-auth-companyCode:$user.companyCode",
        "x-policy-owner:individual"
      ]
    }
  ]
}