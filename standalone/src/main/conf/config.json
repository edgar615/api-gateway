{
  "verticles": {
    "ZookeeperServiceDiscoveryVerticle": {
      "class": "com.github.edgar615.servicediscovery.verticle.ZookeeperServiceDiscoveryVerticle",
      "instances": 1,
      "worker": false,
      "config": {
        "zookeeper": {
          "connect": "localhost:2181",
          "path": "/micro-service"
        }
      }
    },
    "ApiDefinitionVerticle": {
      "class": "com.github.edgar615.direwolves.verticle.ApiDefinitionVerticle",
      "instances": 1,
      "worker": false,
      "config": {
        "api.discovery": {
          "importer": {
            "example": {
              "file": "standalone/src/test/resources/router/mgr"
            }
          },
          "publishedAddress": "direwolves.api.published",
          "unpublishedAddress": "direwolves.api.unpublished"
        }
      }
    },
    "RedisVerticle": {
      "class": "com.github.edgar615.direwolves.redis.RedisVerticle",
      "instances": 1,
      "worker": false,
      "config": {
        "redis": {
          "host": "test.ihorn.com.cn",
          "port": 32770,
          "auth": "7CBF5FBEF855F16F",
          "redis.sub.keys": [
            "__keyevent@0__:expired",
            "__keyevent@0__:del"
          ]
        }
      }
    },
    "ApiDispatchVerticle": {
      "class": "com.github.edgar615.direwolves.verticle.ApiDispatchVerticle",
      "instances": 1,
      "worker": false,
      "dependencies": [
        "RedisVerticle"
      ],
      "config": {
        "namespace": "example",
        "port": 9000,
        "bodyLimit":  1024,
        "service.discovery": {
          "strategy": {
            "user": "random",
            "device": "round_robin"
          }
        },
        "jwt": {
          "path": "keystore.jceks",
          "type": "jceks",
          "password": "secret",
          "algorithm": "HS512",
          "audience": "",
          "issuer": "",
          "subject": "",
          "expiresInSeconds": 1800
        },
        "user": {
          "unique": true,
          "cache": {
            "type": "local",
            "expireAfterWrite": 1800,
            "maximumSize": 5000
          }
        },
        "timeout": {
          "expires": 300,
          "enable": false
        },
        "strict.arg": {
          "enable": true,
          "query.excludes": [
            "appKey",
            "sign",
            "signMethod",
            "v",
            "nonce",
            "timestamp"
          ],
          "body.excludes": []
        },
        "appkey": {
          "secretKey": "appSecret",
          "codeKey": "companyCode",
          "permissionKey": "scope",
          "cache": {
            "type": "local",
            "expireAfterWrite": 1800,
            "maximumSize": 5000
          },
          "data": [
            {
              "appKey": "RmOI7jCvDtfZ1RcAkea1",
              "appSecret": "dbb0f95c8ebf4317942d9f5057d0b38e",
              "appCode": 0,
              "permissions": "all"
            }
          ],
          "url": "/appkey/import"
        },
        "backend.permitted": [
          "18627874615"
        ],
        "request.transformer": {
          "query.remove": [
            "appKey",
            "nonce",
            "v",
            "timestamp",
            "signMethod",
            "sign"
          ]
        },
        "circuit.breaker": {
          "maxFailures": 5,
          "maxRetries": 0,
          "resetTimeout": 60000,
          "timeout": 3000,
          "metricsRollingWindow": 10000,
          "notificationPeriod": 2000,
          "notificationAddress": "vertx.circuit-breaker",
          "registry": "vertx.circuit.breaker.registry"
        },
        "rate.limiter": {
          "user_limiter": {
            "key": "$user.userId",
            "limit": 3,
            "interval": 2,
            "unit": "SECOND"
          }
        }
      }
    }
  }
}